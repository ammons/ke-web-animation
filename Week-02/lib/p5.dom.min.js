/*! p5.dom.js v0.2.0 February 2, 2015 */
(function(a,b){if(typeof define==="function"&&define.amd){define("p5.dom",["p5"],function(c){(b(c))})}else{if(typeof exports==="object"){b(require("../p5"))}else{b(a.p5)}}}(this,function(b){b.prototype.getElement=function(g){var f=document.getElementById(g);if(f){return d(f)}else{return null}};b.prototype.getElements=function(k){var f=[];var h=document.getElementsByClassName(k);if(h){for(var g=0;g<h.length;g++){var i=d(h[g]);f.push(i)}}return f};function d(f){if(f.tagName==="VIDEO"||f.tagName==="AUDIO"){return new b.MediaElement(f)}else{return new b.Element(f)}}b.prototype.removeElements=function(g){for(var f=0;f<this._elements.length;f++){if(!(this._elements[f].elt instanceof HTMLCanvasElement)){this._elements[f].remove()}}};function c(f,g,i){var h=g._userNode?g._userNode:document.body;h.appendChild(f);var j=i?new b.MediaElement(f):new b.Element(f);g._elements.push(j);return j}var a=["div","p","span"];a.forEach(function(f){var g="create"+f.charAt(0).toUpperCase()+f.slice(1);b.prototype[g]=function(i){var h=document.createElement(f);h.innerHTML=typeof i===undefined?"":i;return c(h,this)}});b.prototype.createImg=function(h,g){var f=document.createElement("img");f.src=h;if(typeof g!=="undefined"){f.alt=g}return c(f,this)};b.prototype.createA=function(f,h,i){var g=document.createElement("a");g.href=f;g.innerHTML=h;if(i){g.target=i}return c(g,this)};b.prototype.createSlider=function(h,f,j,i){var g=document.createElement("input");g.type="range";g.min=h;g.max=f;if(i){g.step=i}if(j){g.value=j}return c(g,this)};b.prototype.createButton=function(g,h){var f=document.createElement("button");f.innerHTML=g;f.value=h;if(h){f.value=h}return c(f,this)};b.prototype.createInput=function(g){var f=document.createElement("input");f.type="text";if(g){f.value=g}return c(f,this)};b.prototype.createFileInput=function(i,f){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var g=document.createElement("input");g.type="file";if(f){g.multiple="multiple"}g.addEventListener("change",h,false);function h(k){var n=k.target.files;for(var m=0;m<n.length;m++){var o=n[m];var j=new FileReader();j.onload=l(o);function l(q){var p=new b.File(q);return function(r){p.data=r.target.result;i(p)}}if(o.type==="text"){j.readAsText(o)}else{j.readAsDataURL(o)}}}return c(g,this)}else{console.log("The File APIs are not fully supported in this browser. Cannot create element.")}};function e(j,h,l,n){var f=document.createElement(h);if(typeof l==="string"){l=[l]}for(var g=0;g<l.length;g++){var k=document.createElement("source");k.src=l[g];f.appendChild(k)}if(typeof n!=="undefined"){f.addEventListener("canplaythrough",function(){n()})}var m=c(f,j,true);m.loadedmetadata=false;f.addEventListener("loadedmetadata",function(){m.width=f.videoWidth;m.height=f.videoHeight;m.loadedmetadata=true});return m}b.prototype.createVideo=function(f,g){return e(this,"video",f,g)};b.prototype.createAudio=function(f,g){return e(this,"audio",f,g)};b.prototype.VIDEO="video";b.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;b.prototype.createCapture=function(){var k=true;var j=true;var m;var f;for(var h=0;h<arguments.length;h++){if(arguments[h]===b.prototype.VIDEO){j=false}else{if(arguments[h]===b.prototype.AUDIO){k=false}else{if(typeof arguments[h]==="object"){m=arguments[h]}else{if(typeof arguments[h]==="function"){f=arguments[h]}}}}}if(navigator.getUserMedia){var g=document.createElement("video");if(!m){m={video:k,audio:j}}navigator.getUserMedia(m,function(i){g.src=window.URL.createObjectURL(i);g.play();if(f){f(i)}},function(i){console.log(i)})}else{throw"getUserMedia not supported in this browser"}var l=c(g,this,true);l.loadedmetadata=false;g.addEventListener("loadedmetadata",function(){l.width=g.videoWidth;l.height=g.videoHeight;l.loadedmetadata=true});return l};b.prototype.createElement=function(f,h){var g=document.createElement(f);if(typeof h!=="undefined"){g.innerHTML=h}return c(g,this)};b.Element.prototype.addClass=function(f){if(this.elt.className){this.elt.className=this.elt.className+" "+f}else{this.elt.className=f}return this};b.Element.prototype.removeClass=function(g){var f=new RegExp("(?:^|\\s)"+g+"(?!\\S)");this.elt.className=this.elt.className.replace(f,"");this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,"");return this};b.Element.prototype.child=function(f){if(typeof f==="string"){f=document.getElementById(f)}else{if(f instanceof b.Element){f=f.elt}}this.elt.appendChild(f);return this};b.Element.prototype.html=function(f){if(typeof f!=="undefined"){this.elt.innerHTML=f;return this}else{return this.elt.innerHTML}};b.Element.prototype.position=function(f,g){this.elt.style.position="absolute";this.elt.style.left=f+"px";this.elt.style.top=g+"px";return this};b.Element.prototype.style=function(k,j){if(typeof j==="undefined"){var f=k.split(";");for(var g=0;g<f.length;g++){var h=f[g].split(":");if(h[0]&&h[1]){this.elt.style[h[0].trim()]=h[1].trim()}}}else{this.elt.style[k]=j}return this};b.Element.prototype.attribute=function(f,g){if(typeof g==="undefined"){return this.elt.getAttribute(f)}else{this.elt.setAttribute(f,g);return this}};b.Element.prototype.value=function(){if(arguments.length>0){this.elt.value=arguments[0];return this}else{if(this.elt.type==="range"){return parseFloat(this.elt.value)}else{return this.elt.value}}};b.Element.prototype.show=function(){this.elt.style.display="block";return this};b.Element.prototype.hide=function(){this.elt.style.display="none";return this};b.Element.prototype.size=function(g,n){var o=g;var f=n;var m=b.prototype.AUTO;if(o!==m||f!==m){if(o===m){o=n*this.width/this.height}else{if(f===m){f=g*this.height/this.width}}if(this.elt instanceof HTMLCanvasElement){var l={};var i=this.elt.getContext("2d");for(var p in i){l[p]=i[p]}this.elt.setAttribute("width",o*this._pInst._pixelDensity);this.elt.setAttribute("height",f*this._pInst._pixelDensity);this.elt.setAttribute("style","width:"+o+"px !important; height:"+f+"px !important;");this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var p in l){this.elt.getContext("2d")[p]=l[p]}}else{this.elt.style.width=o+"px !important";this.elt.style.height=f+"px !important";this.elt.width=o;this.elt.height=f}this.elt.style.overflow="hidden";this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;if(this._pInst){if(this._pInst._curElement.elt===this.elt){this._pInst._setProperty("width",this.elt.offsetWidth);this._pInst._setProperty("height",this.elt.offsetHeight)}}}return this};b.Element.prototype.remove=function(){for(var f in this._events){this.elt.removeEventListener(f,this._events[f])}if(this.elt.parentNode){this.elt.parentNode.removeChild(this.elt)}delete (this)};b.MediaElement=function(f,g){b.Element.call(this,f,g)};b.MediaElement.prototype=Object.create(b.Element.prototype);b.MediaElement.prototype.play=function(){if(this.elt.currentTime===this.elt.duration){this.elt.currentTime=0}this.elt.play();return this};b.MediaElement.prototype.stop=function(){this.elt.pause();this.elt.currentTime=0;return this};b.MediaElement.prototype.pause=function(){this.elt.pause();return this};b.MediaElement.prototype.loop=function(){this.elt.setAttribute("loop",true);this.play();return this};b.MediaElement.prototype.noLoop=function(){this.elt.setAttribute("loop",false);return this};b.MediaElement.prototype.autoplay=function(f){this.elt.setAttribute("autoplay",f);return this};b.MediaElement.prototype.volume=function(f){if(typeof f==="undefined"){return this.elt.volume}else{this.elt.volume=f}};b.MediaElement.prototype.time=function(f){if(typeof f==="undefined"){return this.elt.currentTime}else{this.elt.currentTime=f}};b.MediaElement.prototype.duration=function(){return this.elt.duration};b.MediaElement.prototype.pixels=[];b.MediaElement.prototype.loadPixels=function(){if(this.loadedmetadata){if(!this.canvas){this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.drawingContext=this.canvas.getContext("2d")}this.drawingContext.drawImage(this.elt,0,0,this.width,this.height);b.prototype.loadPixels.call(this)}return this};b.MediaElement.prototype.updatePixels=function(f,j,g,i){if(this.loadedmetadata){b.prototype.updatePixels.call(this,f,j,g,i)}return this};b.MediaElement.prototype.get=function(f,j,g,i){if(this.loadedmetadata){return b.prototype.get.call(this,f,j,g,i)}else{return[0,0,0,255]}};b.MediaElement.prototype.set=function(f,h,g){if(this.loadedmetadata){b.prototype.set.call(this,f,h,g)}}}));